{% extends 'main/main_layout.html' %}

{% block css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
    integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.css"
    integrity="sha512-OTcub78R3msOCtY3Tc6FzeDJ8N9qvQn1Ph49ou13xgA9VsH9+LRxoFU6EqLhW4+PKRfU+/HReXmSZXHEkpYoOA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='css/main/home_page.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='icon/icon.css') }}">
<style>
    .search-form-container {
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .input-group-buttons {
        display: flex;
        gap: 0;
    }

    .filter-btn,
    .cancel-btn {
        border-radius: 0;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 15px;
        font-size: 0.9rem;
    }

    .filter-btn {
        border-top-left-radius: 5px;
        border-bottom-left-radius: 5px;
    }

    .cancel-btn {
        border-top-right-radius: 5px;
        border-bottom-right-radius: 5px;
    }

    .filter-btn i {
        margin-right: 5px;
    }

    .modal-content {
        border-radius: 10px;
    }

    .modal-body .form-group {
        margin-bottom: 15px;
    }

    .price-range {
        display: flex;
        gap: 10px;
        align-items: center;
    }

    .price-range input {
        flex: 1;
    }
</style>
{% endblock %}

{% block js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"
    integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="{{ url_for('static', filename='js/main/home_page.js') }}"></script>
{% endblock %}

{% block content %}
<section class="main-section mb-4">
    <div class="text-content">
        <h1>Selamat datang di Rental Mobil Manado</h1>
        <p class="fs-6">Kami adalah perusahaan penyewaan mobil yang berkomitmen untuk memberikan layanan berkualitas
            tinggi dengan harga yang terjangkau. Dengan pengalaman bertahun-tahun di industri ini, kami memahami
            pentingnya kenyamanan dan keandalan dalam setiap perjalanan Anda</p>
        <button class="btn" onclick="scrollToCarList()">Get Started</button>
    </div>
    <div class="image-content">
        <img src="../../static/Gambar/a.png" alt="Image Placeholder">
    </div>
</section>

<section class="about-section mb-4 d-flex justify-content-center">
    <div class="text-center w-100">
        <h2 class="fs-2 mb-3 text-primary">Mengapa memilih kita ?</h2>
        <div class="row row-cols-3 gx-3">
            <div class="col">
                <div class="rounded p-3 item shadow">
                    <img src="{{ url_for('static', filename='icon/believe.png') }}" alt=""
                        style="height: 4rem; width:4rem;">
                    <h4 class="text-primary">Kepercayaan</h4>
                    <p class="text-justify">Banyak dari pelanggan kami adalah pelanggan setia yang terus kembali
                        menggunakan layanan kami.</p>
                </div>
            </div>
            <div class="col">
                <div class="rounded p-3 item shadow">
                    <img src="{{ url_for('static', filename='icon/fast.png') }}" alt=""
                        style="height: 4rem; width:4rem;">
                    <h4 class="text-primary">Mudah dan cepat</h4>
                    <p class="text-justify">Pemesanan begitu mudah dilakukan karena prosesnya tidak kompleks dan sangat
                        ramah pengguna.</p>
                </div>
            </div>
            <div class="col">
                <div class="rounded p-3 item shadow">
                    <img src="{{ url_for('static', filename='icon/Vector.png') }}" alt=""
                        style="height: 4rem; width:4rem;">
                    <h4 class="text-primary">Fleksibel</h4>
                    <p class="text-justify">Penyewaan yang fleksibel sesuai dengan kebutuhan Anda, baik untuk perjalanan
                        singkat maupun jangka panjang.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="flow-section">
    <div class="text-center border p-5 rounded cont">
        <h2 class="fs-2 mb-4 pb-3">Bagaimana Memulainya?</h2>
        <div class="row row-cols-5 gx-3">
            <div class="col">
                <div class="col-item rounded shadow position-relative">
                    <div class="bg-primary text-center rounded-pill m-auto shadow-sm" id="number">1</div>
                    <h4 class="title-number">Login</h4>
                    <div class="text-center p-2">Login atau daftar untuk memulai pemesanan.</div>
                </div>
            </div>
            <div class="col">
                <div class="col-item rounded shadow position-relative">
                    <div class="bg-primary text-center rounded-pill m-auto shadow-sm" id="number">2</div>
                    <h4 class="title-number">Pilih Mobil</h4>
                    <div class="text-center p-2">Pilih mobil yang ingin Anda sewa.</div>
                </div>
            </div>
            <div class="col">
                <div class="col-item rounded shadow position-relative">
                    <div class="bg-primary text-center rounded-pill m-auto shadow-sm" id="number">3</div>
                    <h4 class="title-number">Buat Transaksi</h4>
                    <div class="text-center p-2">Tentukan jumlah hari sewa, pilih sopir (opsional), dan pilih
                        pengambilan mobil di kantor atau pengantaran ke lokasi Anda.</div>
                </div>
            </div>
            <div class="col">
                <div class="col-item rounded shadow position-relative">
                    <div class="bg-primary text-center rounded-pill m-auto shadow-sm" id="number">4</div>
                    <h4 class="title-number">Bayar</h4>
                    <div class="text-center p-2">Lakukan pembayaran setelah mengkonfirmasi transaksi.</div>
                </div>
            </div>
            <div class="col">
                <div class="col-item rounded shadow position-relative">
                    <div class="bg-primary text-center rounded-pill m-auto shadow-sm" id="number">5</div>
                    <h4 class="title-number">Terima Mobil</h4>
                    <div class="text-center p-2">Ambil mobil di kantor dengan bukti pembayaran dan KTP, atau tunggu
                        mobil diantar ke lokasi Anda.</div>
                </div>
            </div>
        </div>
        <div class="text-center mt-3">
            <small style="color: rgba(177, 0, 0, 0.767) ;">*Pengantaran ke lokasi pemesan dikenakan tarif jika melebihi
                jarak yang ditentukan.</small>
        </div>
    </div>
</section>

<section class="car-list-section" id="list-mobil">
    <!-- Bagian Pencarian dan Filter -->
    <div class="search-form-container">
        <form id="search-form" class="w-100">
            <div class="input-group">
                <input type="text" class="form-control" name="search"
                    placeholder="Cari mobil (merek, tipe, seat, bahan bakar, transmisi, harga)">
                <div class="input-group-buttons">
                    <button type="button" class="btn btn-primary filter-btn" data-bs-toggle="modal"
                        data-bs-target="#filterModal">
                        <i class="fas fa-filter"></i> Filter
                    </button>
                    <button type="button" class="btn btn-secondary cancel-btn" id="cancel-search">Batal</button>
                </div>
            </div>
        </form>
    </div>

    <!-- Modal untuk Filter -->
    <div class="modal fade" id="filterModal" tabindex="-1" aria-labelledby="filterModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="filterModalLabel">Filter Mobil</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="brand">Merek</label>
                        <select class="form-control" id="brand">
                            <option value="">Pilih Merek</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="type">Tipe</label>
                        <select class="form-control" id="type">
                            <option value="">Pilih Tipe</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="bahan_bakar">Bahan Bakar</label>
                        <select class="form-control" id="bahan_bakar">
                            <option value="">Pilih Bahan Bakar</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="seat">Seat</label>
                        <select class="form-control" id="seat">
                            <option value="">Pilih Jumlah Seat</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="transmisi">Transmisi</label>
                        <select class="form-control" id="transmisi">
                            <option value="">Pilih Transmisi</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="rating">Rating</label>
                        <select class="form-control" id="rating">
                            <option value="">Pilih Rating</option>
                            <option value="0">Belum Ada Rating</option>
                            <option value="1">1 Bintang</option>
                            <option value="2">2 Bintang</option>
                            <option value="3">3 Bintang</option>
                            <option value="4">4 Bintang</option>
                            <option value="5">5 Bintang</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Range Harga (per Hari)</label>
                        <div class="price-range">
                            <input type="number" class="form-control" id="min_price" placeholder="Harga Min" min="0">
                            <span>-</span>
                            <input type="number" class="form-control" id="max_price" placeholder="Harga Max" min="0">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="reset-filters">Reset</button>
                    <button type="button" class="btn btn-primary" id="apply-filters">Terapkan</button>
                </div>
            </div>
        </div>
    </div>

    <h2 class="mb-3 text-primary">List Mobil</h2>
    <div class="car-list owl-carousel">
        {% for dt in data %}
        <div class="card border-1 rounded-4 overflow-hidden">
            <img src="{{ url_for('static', filename='Gambar/mobil/') }}{{dt.gambar}}" alt="{{dt.gambar}}"
                id="gambar_mobil" class="card-img-top">
            <div class="card-body">
                <h3 class="mb-2 text-primary">{{dt.merek}} {{ dt.type_mobil }}</h3>
                <div class="car-info d-flex justify-content-between align-items-center">
                    <div class="car-info-item d-flex align-items-center">
                        <i class="eicon-seat pe-2 fs-5"></i>
                        <span>Seat: {{dt.seat}}</span>
                    </div>
                    <div class="car-info-item d-flex align-items-center">
                        <i class="fa-solid fa-gas-pump pe-2 fs-5"></i>
                        <span>{{dt.bahan_bakar}}</span>
                    </div>
                    <div class="car-info-item d-flex align-items-center">
                        <i class="eicon-transmission pe-2 fs-5"></i>
                        <span>{{dt.transmisi}}</span>
                    </div>
                </div>
                <div class="border-top mt-3 py-3">
                    <div class="row">
                        <div class="col">Harga</div>
                        <div class="col-auto"><span data-target="currency">{{dt.harga}}</span>/ Hari</div>
                    </div>
                </div>
                <div class="d-flex align-items-center mt-2">
                    <span class="me-2">Rating:</span>
                    <div id="rating-stars"></div>
                    <span id="current-rating" class="ms-2">{{dt.rating | default(0)}}/5</span>
                </div>
                <div class="d-flex mt-2">
                    <span class="me-2">Komentar:</span>
                    <div id="comment" class="m-0">{{dt.komentar | default('Belum ada komentar')}}</div>
                </div>
                <div class="d-flex">
                    <a class="btn car-btn btn-primary m-auto w-100 rounded-5"
                        href="/detail-mobil?id={{dt.id_mobil or dt._id}}">Detail</a>
                </div>
            </div>
        </div>
        {% else %}
        <p>Tidak ada mobil yang tersedia.</p>
        {% endfor %}
    </div>
</section>
{% endblock %}